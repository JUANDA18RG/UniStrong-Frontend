import{bf as _,r as a,ao as U,ap as J,a as s,F as K,j as e,H as Q,v as X,B as i,aq as ee,T as g,am as I,al as re}from"./index.6f29d54c.js";import{F as oe}from"./form-divider.de671e3e.js";import{B as te}from"./BannerLogin.edc6c678.js";import{m as h,v as ae}from"./fade.2b467b59.js";import{v as E}from"./rotate.6bce3218.js";import{I as R,d as B,a as F}from"./VisibilityOff.05d98fa8.js";import{C as se}from"./config-global.ff2a549f.js";import{G as w}from"./Grid.a2d7585c.js";import{T as b}from"./TextField.d0c16b0f.js";import"./Divider.cee5b4c1.js";import"./dividerClasses.ac5022c8.js";import"./Select.5c46e07a.js";const ie={title:`ForgotPasword |  ${se.appName}`};function ve(){const{requestPasswordCode:M,verifyCode:A,changePassword:L}=_(),[n,T]=a.exports.useState(0),[v,z]=a.exports.useState(!1),[C,Y]=a.exports.useState(!1),[l,u]=a.exports.useState(""),{enqueueSnackbar:f}=U(),[c,W]=a.exports.useState(""),[m,$]=a.exports.useState(""),[p,D]=a.exports.useState(""),[y,N]=a.exports.useState(""),[k,P]=a.exports.useState(!1),j=J(),O=/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,6}$/,V=/^(?=.*[A-Z])(?=.*[a-z])(?=.*\d)(?=.*[!@#$%^&*(),.?":{}|<>]).{8,}$/,S=()=>{u(""),T(r=>r+1)},Z=r=>!r||!O.test(r),q=r=>!r||r.trim()===""?"El c\xF3digo no puede estar vac\xEDo":r.length!==6?"El c\xF3digo debe tener exactamente 6 caracteres":null,G=(r,t)=>!r||!V.test(r)?"La contrase\xF1a debe tener al menos 8 caracteres, una may\xFAscula, un n\xFAmero y un car\xE1cter especial":r!==t?"Las contrase\xF1as no coinciden":null,H=async r=>{var t,x;r.preventDefault(),console.log("Email enviado:",c),P(!0);try{if(Z(c)){u("Por favor ingresa un correo electr\xF3nico v\xE1lido");return}if(n===0){const o=await M(c);f(o.data.message,{variant:"success"}),S()}else if(n===1){const o=q(m);if(o){u(o);return}const d=await A(c,m);f(d.data.message,{variant:"success"}),S()}else if(n===2){const o=G(p,y);if(o){u(o);return}const d=await L(c,p);f(d.data.message,{variant:"success"}),console.log("Nuevo password:",p),j("/login")}}catch(o){console.error(o);const d=((x=(t=o.response)==null?void 0:t.data)==null?void 0:x.message)||(typeof o=="string"?o:o.message);u(d),f(`Error: ${d}`,{variant:"error"}),console.log("Error:",d)}finally{P(!1)}};return s(K,{children:[e(Q,{children:e("title",{children:ie.title})}),s(w,{container:!0,sx:{overflow:"hidden"},maxHeight:{xs:"calc(100vh)",sm:"calc(100vh)"},children:[e(w,{item:!0,xs:12,md:6,sx:{display:"flex",justifyContent:"center",alignItems:"center",padding:{xs:2,sm:4},backgroundColor:"cultured.main"},children:e(h.div,{initial:"initial",animate:"animate",exit:"exit",variants:X().in,children:s(i,{sx:{maxWidth:500,width:"100%",padding:{xs:2,sm:4},borderRadius:3,boxShadow:"0px 4px 20px rgba(0, 0, 0, 0.1)",backgroundColor:"#ffffff"},children:[e(h.div,{initial:"initial",animate:"animate",exit:"exit",variants:E().in,children:e("img",{src:ee,alt:"Logo",style:{margin:"0 auto 10px auto",padding:"5px",border:"3px solid #ff0000",borderRadius:"50%",width:"100px",height:"100px",display:"block",boxShadow:"0 10px 0 10px #ffffff"}})}),s(g,{variant:"h5",component:"h1",color:"redRYB.main",sx:{fontSize:{xs:"1.5rem",sm:"2rem",md:"2.5rem"},textAlign:"center",justifyContent:"center",fontWeight:700,textTransform:"uppercase",marginY:3},children:["UniStrong  ",e("span",{style:{color:"Black"},children:" Recover password"})]}),s("form",{onSubmit:H,children:[s(i,{display:"flex",flexDirection:"column",gap:3,children:[n===0&&e(b,{name:"email",label:"Email Address",placeholder:"Enter your email address",value:c,onChange:r=>W(r.target.value),InputLabelProps:{shrink:!0},fullWidth:!0,variant:"outlined",error:!!l,helperText:l,sx:{backgroundColor:"#f4f4f9",borderRadius:2,"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:"gray"},"&:hover fieldset":{borderColor:"blue"},"&.Mui-focused fieldset":{borderColor:"redRYB.main"},"&.Mui-error fieldset":{borderColor:"red"}}}}),n===1&&s(i,{display:"flex",flexDirection:"column",gap:2,children:[e(g,{variant:"h1",sx:{fontSize:{xs:"0.875rem",sm:"1rem",md:"1.125rem",lg:"1.25rem"}},children:"Please enter the code sent to your email address"}),e(i,{display:"flex",gap:2,children:["code1","code2","code3","code4","code5","code6"].map((r,t)=>e(b,{name:r,inputMode:"numeric",pattern:"[0-9]*",placeholder:"0",value:m.charAt(t),onChange:x=>{const o=x.target.value;/^\d*$/.test(o)&&$(m.substring(0,t)+o+m.substring(t+1))},InputLabelProps:{shrink:!0},fullWidth:!0,variant:"outlined",sx:{backgroundColor:"#f4f4f9",borderRadius:2,"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:"gray"},"&:hover fieldset":{borderColor:"blue"},"&.Mui-focused fieldset":{borderColor:"redRYB.main"},"&.Mui-error fieldset":{borderColor:"red"}}}},t))}),l&&e(g,{color:"error",sx:{marginTop:-2,marginBottom:1,width:"100%"},children:l})]}),n===2&&s(i,{display:"flex",flexDirection:"column",gap:2,children:[e(b,{name:"password",label:"New Password",value:p,onChange:r=>D(r.target.value),type:v?"text":"password",placeholder:"Enter your new password",InputLabelProps:{shrink:!0},fullWidth:!0,variant:"outlined",sx:{backgroundColor:"#f4f4f9",borderRadius:2,"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:"gray"},"&:hover fieldset":{borderColor:"blue"},"&.Mui-focused fieldset":{borderColor:"redRYB.main"},"&.Mui-error fieldset":{borderColor:"red"}}},InputProps:{endAdornment:e(R,{position:"end",children:e(I,{onClick:()=>z(!v),edge:"end",children:v?e(B,{}):e(F,{})})})}}),e(b,{name:"confirmPassword",label:"Confirm Password",value:y,onChange:r=>N(r.target.value),type:C?"text":"password",placeholder:"Repeat your new password",InputLabelProps:{shrink:!0},fullWidth:!0,variant:"outlined",error:!!l,helperText:l,sx:{backgroundColor:"#f4f4f9",borderRadius:2,"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:"gray"},"&:hover fieldset":{borderColor:"blue"},"&.Mui-focused fieldset":{borderColor:"redRYB.main"},"&.Mui-error fieldset":{borderColor:"red"}}},InputProps:{endAdornment:e(R,{position:"end",children:e(I,{onClick:()=>Y(!C),edge:"end",children:C?e(B,{}):e(F,{})})})}})]})]}),e(re,{type:"submit",variant:"contained",color:"primary",disabled:k,fullWidth:!0,sx:{mt:3,py:1.5,backgroundColor:"redRYB.main","&:hover":{backgroundColor:"#b71c1c"}},children:k?"Enviando...":n===2?"Change Password":"Next"})]}),e(oe,{}),e(i,{sx:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"row",marginTop:2}})]})})}),e(w,{item:!0,xs:!1,md:6,sx:{height:"100vh"},children:e(h.div,{variants:ae().in,style:{height:"100%"},children:e(i,{sx:{height:"100%",backgroundImage:`url(${te})`,backgroundSize:"cover",backgroundPosition:"center",position:"relative",display:{xs:"none",md:"block"}},children:e(i,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:2,textAlign:"center",color:"white",display:{xs:"none",md:"block"}},children:e(h.div,{initial:"initial",animate:"animate",exit:"exit",variants:E().in,children:e(g,{variant:"h2",fontWeight:"bold",sx:{fontSize:{xs:"1.5rem",sm:"3rem"}},children:"Transform Your Body, Transform Your Life"})})})})})})]})]})}export{ve as default};
//# sourceMappingURL=ForgotPassword.0eea9593.js.map
