import{aK as K,j as e,an as j,B as g,a,v as Q,T as x,r as c,b8 as X,b9 as H,ax as Z,ao as U,F as Y,aq as L,S as ee,al as w,am as re,ba as P,ar as ae,bb as te,H as ne}from"./index.6f29d54c.js";import{m as D,v as oe}from"./fade.2b467b59.js";import{B as ie,a as se}from"./Grid10.a68b8973.js";import{F as le,i as de}from"./index.dd42d5c8.js";import{i as ce,a as ue,b as he}from"./index.c037dcbb.js";import{v as me}from"./rotate.6bce3218.js";import{a as I,I as k,S as F}from"./Select.5c46e07a.js";import{M as o}from"./MenuItem.ea1f428a.js";import{C as G}from"./Card.f6426ab6.js";import{D as ge,a as pe,b as be,c as ve}from"./DialogTitle.102bca73.js";import{C as xe}from"./Close.78029c4a.js";import{T}from"./TextField.d0c16b0f.js";import{u as fe,C as A}from"./index.esm.02330b99.js";import{z as E,t as Ce}from"./zod.module.40bda67a.js";import{G as R}from"./Grid.a2d7585c.js";import{C as ye}from"./config-global.ff2a549f.js";import"./dividerClasses.ac5022c8.js";const Ee=K(e("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"}),"Add");function Re(){const{User:u}=j();return e(g,{children:e(D.div,{initial:"initial",animate:"animate",exit:"exit",variants:oe().in,children:a(g,{minHeight:{xs:"calc(100vh)",sm:"calc(100vh)"},sx:{position:"relative",width:"100%",backgroundImage:`url(${ie})`,backgroundSize:"cover",backgroundPosition:"center",display:"flex",alignItems:"center",justifyContent:"center",color:"white",textAlign:"center"},children:[e(g,{sx:{position:"absolute",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.5)"}}),e(D.div,{initial:"initial",animate:"animate",exit:"exit",variants:Q().in,children:a(g,{sx:{position:"relative",zIndex:1},children:[a(x,{variant:"h2",component:"h1",gutterBottom:!0,children:["\xA1Bienvenido a UniStrong entrenador,"," ",e(x,{variant:"h2",component:"span",sx:{color:"redRYB.main"},children:u.username}),"!"]}),e(x,{variant:"h5",children:"Cambia vidas, cambia el mundo"})]})})]})})})}const Se=({onSelectionChange:u})=>{const[p,s]=c.exports.useState(""),[f,d]=c.exports.useState([]);return c.exports.useEffect(()=>{(async()=>{try{const t=await X();d(t.data),console.log(t.data)}catch(t){console.error("Error al obtener los usuarios:",t)}})()},[]),a(I,{fullWidth:!0,variant:"outlined",margin:"normal",children:[e(k,{id:"user-select-label",children:"Usuario"}),a(F,{labelId:"user-select-label",id:"user-select",value:p,label:"Usuario",onChange:m=>{const t=m.target.value;s(t),u(t)},children:[e(o,{value:"",children:e("em",{children:"Seleccione un usuario"})}),f.map(m=>e(o,{value:m.user.email,children:m.user.email},m.id))]})]})},we=({onSelectionChange:u,personaId:p})=>{const[s,f]=c.exports.useState(""),[d,h]=c.exports.useState([]);return c.exports.useEffect(()=>{p&&(async()=>{try{const i=await H(p);console.log("Rutinas obtenidas:",i.data),h(i.data)}catch(i){console.error("Error al obtener las rutinas:",i)}})()},[p]),a(I,{fullWidth:!0,variant:"outlined",margin:"normal",children:[e(k,{id:"rutina-select-label",children:"Rutina"}),a(F,{labelId:"rutina-select-label",id:"rutina-select",value:s,label:"Rutina",onChange:t=>{const i=t.target.value;f(i),u(i)},children:[e(o,{value:"",children:e("em",{children:"Seleccione una rutina"})}),d.map(t=>e(o,{value:t.id,children:t.name},t.id))]})]})},De=()=>{Z();const u=c.exports.useRef(null),[p,s]=c.exports.useState([]),[f,d]=c.exports.useState(!1),[h,m]=c.exports.useState(null),{additionalData:t}=j(),{enqueueSnackbar:i}=U(),[l,n]=c.exports.useState({start:"",recurrenceDay:"",userId:"",rutinaId:""});console.log(t);const b=r=>{n({start:r.startStr,recurrenceDay:"",userId:t.id,rutinaId:""}),d(!0)},M=r=>{m(r.event),n({start:r.event.startStr,recurrenceDay:r.event.extendedProps.recurrenceDay,userId:r.event.extendedProps.userId,rutinaId:r.event.extendedProps.rutinaId}),d(!0)},C=async()=>{try{console.log("Evento a agregar:",l);const r={scheduledDate:l.start,email:l.userId,routineId:l.rutinaId,recurrenceDay:l.recurrenceDay};console.log("Data a enviar:",r);const v=await P(r);if(v.status!==200)throw new Error("Error al agregar el evento");i("Evento agregado correctamente",{variant:"success"}),console.log("Evento agregado:",v.data),window.location.reload()}catch(r){console.error("Error:",r),i("Error al agregar el evento",{variant:"error"})}},S=async()=>{try{const r=await P(l);if(r.status!==200)throw new Error("Error al actualizar el evento");i("Evento actualizado correctamente",{variant:"success"}),console.log("Evento actualizado:",r.data),window.location.reload()}catch(r){console.error("Error:",r),i("Error al actualizar el evento",{variant:"error"})}},q=()=>{h.remove(),s(p.filter(r=>r.id!==h.id)),d(!1)},_=r=>{n({...l,userId:r})},N=r=>{n({...l,rutinaId:r})},$=r=>{n({...l,recurrenceDay:r.target.value})};return c.exports.useEffect(()=>{(async()=>{try{const v=await H(t.id);if(console.log("Response:",v),v.status!==200)throw new Error("Error al obtener las rutinas");console.log("Rutinas:",v.data);const B={},O=["#FF5733","#33FF57","#3357FF","#FF33A1","#FF8C33","#33FFF5","#8C33FF"];let z=0;const V=v.data.flatMap(W=>W.clients.flatMap(y=>(B[y.user_id]||(B[y.user_id]=O[z%O.length],z++),y.client_routines.recurrentDates.map(J=>({id:W.id,title:W.name,start:J,userId:y.user_id,rutinaId:W.id,recurrenceDay:y.client_routines.recurrenceDay,backgroundColor:B[y.user_id],borderColor:B[y.user_id]})))));s(V)}catch(v){console.error("Error:",v),i("Error al obtener las rutinas",{variant:"error"})}})()},[t.id,i]),a(Y,{children:[a(g,{sx:{p:5,backgroundColor:"cultured.main"},children:[a(g,{children:[e(D.div,{initial:"initial",animate:"animate",exit:"exit",variants:me().in,children:e(g,{sx:{display:"flex",justifyContent:"center",alignItems:"center",mb:3},children:e("img",{src:L,alt:"Logo",style:{padding:"10px",border:"5px solid #ff0000",borderRadius:"50%",width:"120px",height:"120px",boxShadow:"0 10px 20px rgba(0,0,0,0.2)",transition:"transform 0.3s"},onMouseOver:r=>r.currentTarget.style.transform="scale(1.1)",onMouseOut:r=>r.currentTarget.style.transform="scale(1)"})})}),e(x,{variant:"h4",align:"center",gutterBottom:!0,sx:{fontWeight:"bold",color:"redRYB.main"},children:"Tus Horarios de Entrenamientos"}),e(x,{variant:"subtitle1",align:"center",gutterBottom:!0,children:"Organiza tu entrenamiento con nuestras clases programadas"})]}),a(ee,{direction:"row",alignItems:"center",justifyContent:"space-between",sx:{mb:3},children:[e(x,{sx:{fontWeight:"bold",color:"richBlack.main"},variant:"h6",children:"Calendario de Eventos"}),e(w,{variant:"contained",startIcon:e(Ee,{}),onClick:()=>d(!0),sx:{backgroundColor:"redRYB.main","&:hover":{backgroundColor:"#b71c1c",transform:"scale(1.05)"},transition:"transform 0.3s"},children:"Asignar Rutina"})]}),e(G,{sx:{p:2,boxShadow:"0 8px 16px rgba(0,0,0,0.1)",borderRadius:"16px"},children:e(le,{ref:u,plugins:[de,ce,ue,he],initialView:"dayGridMonth",selectable:!0,editable:!0,events:p,select:b,eventClick:M,headerToolbar:{left:"prev,next today",center:"title",right:"dayGridMonth,timeGridWeek,timeGridDay,listWeek"},buttonText:{today:"Hoy",month:"Mes",week:"Semana",day:"D\xEDa",list:"Lista"},height:"auto",eventTextColor:"#fff"})})]}),a(ge,{open:f,onClose:()=>d(!1),fullWidth:!0,maxWidth:"sm",PaperProps:{sx:{p:2,borderRadius:"16px",boxShadow:"0 8px 16px rgba(0,0,0,0.1)"}},children:[a(pe,{children:[h?"Editar Evento":"Nuevo Evento",e(re,{"aria-label":"close",onClick:()=>d(!1),sx:{position:"absolute",right:8,top:8,color:r=>r.palette.grey[500]},children:e(xe,{})})]}),a(be,{dividers:!0,children:[e(T,{margin:"dense",label:"Fecha de Inicio",type:"datetime-local",fullWidth:!0,value:l.start,onChange:r=>n({...l,start:r.target.value}),InputLabelProps:{shrink:!0},variant:"outlined"}),a(I,{fullWidth:!0,variant:"outlined",margin:"normal",children:[e(k,{id:"recurrence-day-label",children:"D\xEDa de Recurrencia"}),a(F,{labelId:"recurrence-day-label",id:"recurrence-day",value:l.recurrenceDay,onChange:$,label:"D\xEDa de Recurrencia",children:[e(o,{value:"",children:e("em",{children:"Seleccione un d\xEDa"})}),e(o,{value:0,children:"Domingo"}),e(o,{value:1,children:"Lunes"}),e(o,{value:2,children:"Martes"}),e(o,{value:3,children:"Mi\xE9rcoles"}),e(o,{value:4,children:"Jueves"}),e(o,{value:5,children:"Viernes"}),e(o,{value:6,children:"S\xE1bado"})]})]}),e(Se,{onSelectionChange:_}),e(we,{onSelectionChange:N,personaId:t.id})]}),a(ve,{children:[h&&e(w,{onClick:q,color:"error",variant:"contained",children:"Eliminar"}),e(w,{onClick:()=>d(!1),variant:"outlined",children:"Cancelar"}),e(w,{onClick:h?S:C,variant:"contained",sx:{backgroundColor:"redRYB.main","&:hover":{backgroundColor:"#b71c1c"}},children:h?"Guardar Cambios":"Agregar Evento"})]})]})]})},Ie=E.object({name:E.string().nonempty("El nombre es requerido"),description:E.string().nonempty("La descripci\xF3n es requerida"),category:E.string().nonempty("La categor\xEDa es requerida"),musclesWorked:E.array(E.string()).nonempty("El m\xFAsculo trabajado es requerido")}),ke={name:"",description:"",category:"",musclesWorked:[]},Fe=()=>{const{control:u,handleSubmit:p,formState:{errors:s,isSubmitting:f},reset:d}=fe({resolver:Ce(Ie),defaultValues:ke}),{enqueueSnackbar:h}=U(),{additionalData:m}=j(),[t,i]=c.exports.useState(""),l=async n=>{var b,M;try{if(n.musclesWorked.length===0)throw new Error("Debes seleccionar al menos un m\xFAsculo trabajado");const C={...n,coachId:m.id};(await te(C)).status===201&&(h("Rutina creada exitosamente",{variant:"success"}),d())}catch(C){const S=((M=(b=C.response)==null?void 0:b.data)==null?void 0:M.message)||(typeof C=="string"?C:C.message);i(S),console.error("Error al crear la rutina",S)}};return a(g,{sx:{display:"flex",minHeight:"100vh",backgroundColor:"white",alignItems:"center",justifyContent:"center",padding:5},children:[e(g,{sx:{flex:1,display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:"lightgray",height:"100vh"},children:e(D.img,{src:se,alt:"Banner",initial:{opacity:0},animate:{opacity:1},transition:{duration:1},style:{width:"100%",height:"100%",objectFit:"cover",borderRadius:"16px",boxShadow:"0 10px 20px rgba(0,0,0,0.2)"}})}),e(g,{sx:{flex:1,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",p:5,height:"100vh"},children:a(G,{sx:{width:"100%",maxWidth:"600px",p:4,boxShadow:"0 8px 16px rgba(0,0,0,0.5)",borderRadius:"16px",backgroundColor:"white",overflow:"auto",maxHeight:"100%"},children:[a(g,{sx:{textAlign:"center",mb:3},children:[e(D.div,{initial:"initial",animate:"animate",exit:"exit",variants:{initial:{opacity:0,rotate:-10},animate:{opacity:1,rotate:0},exit:{opacity:0,rotate:10}},children:e("img",{src:L,alt:"Logo",style:{padding:"10px",border:"5px solid #ff0000",borderRadius:"50%",width:"120px",height:"120px",boxShadow:"0 10px 20px rgba(0,0,0,0.2)",transition:"transform 0.3s"},onMouseOver:n=>n.currentTarget.style.transform="scale(1.1)",onMouseOut:n=>n.currentTarget.style.transform="scale(1)"})}),e(x,{variant:"h4",sx:{fontWeight:"bold",color:"redRYB.main"},children:"Crear Nueva Rutina"}),e(x,{variant:"subtitle1",children:"Asigna una nueva rutina de ejercicios a un usuario espec\xEDfico"})]}),!!t&&e(ae,{severity:"error",sx:{mb:2},children:t}),e("form",{onSubmit:p(l),noValidate:!0,children:a(R,{container:!0,spacing:2,children:[e(R,{item:!0,xs:12,children:e(A,{name:"name",control:u,render:({field:n})=>{var b;return e(T,{...n,margin:"dense",label:"Nombre",type:"text",fullWidth:!0,variant:"outlined",error:!!s.name,helperText:(b=s.name)==null?void 0:b.message,sx:{backgroundColor:"#f4f4f9",borderRadius:2,"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:"gray"},"&:hover fieldset":{borderColor:"blue"},"&.Mui-focused fieldset":{borderColor:"redRYB.main"},"&.Mui-error fieldset":{borderColor:"red"}}}})}})}),e(R,{item:!0,xs:12,children:e(A,{name:"description",control:u,render:({field:n})=>{var b;return e(T,{...n,margin:"dense",label:"Descripci\xF3n",type:"text",fullWidth:!0,variant:"outlined",multiline:!0,rows:4,maxRows:4,error:!!s.description,helperText:(b=s.description)==null?void 0:b.message,sx:{backgroundColor:"#f4f4f9",borderRadius:2,"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:"gray"},"&:hover fieldset":{borderColor:"blue"},"&.Mui-focused fieldset":{borderColor:"redRYB.main"},"&.Mui-error fieldset":{borderColor:"red"}}}})}})}),e(R,{item:!0,xs:12,children:a(I,{fullWidth:!0,margin:"dense",variant:"outlined",error:!!s.category,children:[e(k,{id:"category-select-label",children:"Categor\xEDa"}),e(A,{name:"category",control:u,render:({field:n})=>a(F,{...n,labelId:"category-select-label",label:"Categor\xEDa",sx:{backgroundColor:"#f4f4f9",borderRadius:2,"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:"gray"},"&:hover fieldset":{borderColor:"blue"},"&.Mui-focused fieldset":{borderColor:"redRYB.main"},"&.Mui-error fieldset":{borderColor:"red"}}},children:[e(o,{value:"Facil",children:"Facil"}),e(o,{value:"Medio",children:"Medio"}),e(o,{value:"Avanzado",children:"Avanzado"})]})}),s.category&&e(x,{color:"error",children:s.category.message})]})}),e(R,{item:!0,xs:12,children:a(I,{fullWidth:!0,margin:"dense",variant:"outlined",error:!!s.musclesWorked,children:[e(k,{id:"musclesWorked-select-label",children:"M\xFAsculos Trabajados"}),e(A,{name:"musclesWorked",control:u,render:({field:n})=>a(F,{...n,labelId:"musclesWorked-select-label",label:"M\xFAsculos Trabajados",multiple:!0,sx:{backgroundColor:"#f4f4f9",borderRadius:2,"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:"gray"},"&:hover fieldset":{borderColor:"blue"},"&.Mui-focused fieldset":{borderColor:"redRYB.main"},"&.Mui-error fieldset":{borderColor:"red"}}},children:[e(o,{value:"Pecho",children:"Pecho"}),e(o,{value:"Espalda",children:"Espalda"}),e(o,{value:"Piernas",children:"Piernas"}),e(o,{value:"Brazos",children:"Brazos"}),e(o,{value:"Hombros",children:"Hombros"})]})})]})}),e(R,{item:!0,xs:12,children:e(w,{type:"submit",variant:"contained",fullWidth:!0,disabled:f,sx:{backgroundColor:"redRYB.main","&:hover":{backgroundColor:"#b71c1c"}},children:f?"Creando...":"Crear Rutina"})})]})})]})})]})},Me={title:`Bienvenido entrenador |  ${ye.appName}`};function Ve(){return a(Y,{children:[e(ne,{children:a("title",{children:[" ",Me.title]})}),e(Re,{}),e(De,{}),e(Fe,{})]})}export{Ve as default};
//# sourceMappingURL=Entrenador.34be7926.js.map
