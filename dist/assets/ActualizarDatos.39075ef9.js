import{bs as A,br as I,an as N,r as g,j as e,a as d,B as C,T as W,S as k,al as E}from"./index.6f29d54c.js";import{G as n}from"./Grid.a2d7585c.js";import{T as l}from"./TextField.d0c16b0f.js";import{a as y,I as D,S}from"./Select.5c46e07a.js";import{M as i}from"./MenuItem.ea1f428a.js";import"./dividerClasses.ac5022c8.js";const j=o=>A.get(`/client/ByUser/${o}`),z=o=>{const c=I.get("token");return A.patch("/client/edit_perfil_client",o,{headers:{Authorization:`Bearer ${c}`}})},q=()=>{const{User:o}=N(),c=o==null?void 0:o.id,[t,s]=g.exports.useState({name:"",email:"",passwordCurrent:"",password:"",dni:"",birthDate:"",phoneNumber:"",height:"",diseases:[],dietaryRestrictions:[]}),[H,R]=g.exports.useState([]),[v,b]=g.exports.useState(!1),[T,h]=g.exports.useState("");g.exports.useEffect(()=>{(async()=>{var m,u,f,x;if(console.log("ID del usuario:",c),!c){console.error("ID no v\xE1lido");return}try{const p=await j(c),r=p==null?void 0:p.data;console.log("Datos de la respuesta:",r);const F=r!=null&&r.birthDate?new Date(r==null?void 0:r.birthDate).toISOString().split("T")[0]:"";s({name:((m=r==null?void 0:r.user)==null?void 0:m.name)||"",email:((u=r==null?void 0:r.user)==null?void 0:u.email)||"",phoneNumber:((f=r==null?void 0:r.user)==null?void 0:f.phoneNumber)||"",height:(r==null?void 0:r.height)||"",dni:((x=r==null?void 0:r.user)==null?void 0:x.dni)||"",birthDate:F,diseases:Array.isArray(r==null?void 0:r.diseases)?r==null?void 0:r.diseases:[],dietaryRestrictions:Array.isArray(r==null?void 0:r.dietaryRestrictions)?r==null?void 0:r.dietaryRestrictions:[]}),R((r==null?void 0:r.diseasesList)||[])}catch(p){console.error("Error al obtener los datos",p),s(r=>({...r,error:"Hubo un problema al cargar los datos."}))}})()},[c]);const w=async()=>{b(!0),h(""),console.log("Datos a enviar:",t);try{const a=await z(t);(a==null?void 0:a.status)===200?alert("Datos actualizados correctamente!"):h("")}catch(a){console.error("Error al actualizar los datos",a),h("Hubo un problema al actualizar los datos.")}finally{b(!1)}};return e(n,{container:!0,sx:{overflow:"hidden",width:"100%",padding:{xs:2,sm:4},height:"100%",minHeight:"100vh",backgroundColor:"common.black"},children:e(n,{item:!0,xs:12,md:12,sx:{display:"flex",backgroundColor:"cultured.main",marginTop:"100px",padding:2,borderRadius:2,boxShadow:2,flexDirection:"column",alignItems:"center"},children:d(C,{sx:{padding:4},children:[e(W,{variant:"h5",component:"h1",color:"redRYB.main",sx:{fontSize:{xs:"1.5rem",sm:"2rem",md:"2.5rem"},textAlign:"center",justifyContent:"center",fontWeight:700,textTransform:"uppercase",marginY:3},children:e("span",{style:{color:"red"},children:"Actualizar Informaci\xF3n Personal"})}),d(k,{spacing:3,sx:{width:"100%",maxWidth:"800px",margin:"auto"},children:[d(n,{container:!0,spacing:3,children:[e(n,{item:!0,xs:12,sm:6,children:e(l,{label:"Nombre",fullWidth:!0,variant:"outlined",value:t.name,onChange:a=>s({...t,name:a.target.value})})}),e(n,{item:!0,xs:12,sm:6,children:e(l,{label:"Correo",fullWidth:!0,variant:"outlined",value:t.email,onChange:a=>s({...t,email:a.target.value})})}),e(n,{item:!0,xs:12,sm:6,children:e(l,{label:"N\xFAmero de Tel\xE9fono",fullWidth:!0,variant:"outlined",value:t.phoneNumber,onChange:a=>s({...t,phoneNumber:a.target.value})})}),e(n,{item:!0,xs:12,sm:6,children:e(l,{name:"height",label:"Altura (metros)",placeholder:"1,60",InputLabelProps:{shrink:!0},value:t.height,onChange:a=>{const m=a.target.value,u=parseFloat(m.replace(",","."));!isNaN(u)&&u>=1.3&&u<=2?(t.height(u),h("")):(t.height(m),h("La altura debe ser un n\xFAmero entre 1.30 y 2.0 metros"))},type:"text",fullWidth:!0,variant:"outlined",sx:{backgroundColor:"#f4f4f9",borderRadius:2}})}),e(n,{item:!0,xs:12,sm:6,children:e(l,{label:"Dni",fullWidth:!0,variant:"outlined",value:t.dni,onChange:a=>s({...t,dni:a.target.value})})}),e(n,{item:!0,xs:12,sm:6,children:d(y,{fullWidth:!0,margin:"dense",variant:"outlined",children:[e(D,{id:"diseases-select-label",children:"Enfermedades"}),d(S,{labelId:"diseases-select-label",label:"Enfermedades",multiple:!0,value:t.diseases,onChange:a=>s({...t,diseases:a.target.value}),renderValue:a=>a.join(", "),fullWidth:!0,variant:"outlined",sx:{backgroundColor:"#f4f4f9",borderRadius:2},children:[e(i,{value:"Hipertensi\xF3n arterial",children:"Hipertensi\xF3n arterial"}),e(i,{value:"Diabetes",children:"Diabetes"}),e(i,{value:"Obesidad",children:"Obesidad"}),e(i,{value:"Asma",children:"Asma"}),e(i,{value:"Artritis",children:"Artritis"}),e(i,{value:"Osteoporosis",children:"Osteoporosis"}),e(i,{value:"Hernias discales",children:"Hernias discales"}),e(i,{value:"Insuficiencia card\xEDaca",children:"Insuficiencia card\xEDaca"}),e(i,{value:"Hipotiroidismo",children:"Hipotiroidismo"}),e(i,{value:"Ninguna",children:"Ninguna"})]})]})}),e(n,{item:!0,xs:12,sm:6,children:d(y,{fullWidth:!0,margin:"dense",variant:"outlined",children:[e(D,{id:"dietaryRestrictions-select-label",children:"Restricciones"}),d(S,{labelId:"dietaryRestrictions-select-label",label:"Restricciones",multiple:!0,value:t.dietaryRestrictions,onChange:a=>s({...t,dietaryRestrictions:a.target.value}),renderValue:a=>a.join(", "),fullWidth:!0,variant:"outlined",sx:{backgroundColor:"#f4f4f9",borderRadius:2},children:[e(i,{value:"Sin Lactosa",children:"Sin Lactosa"}),e(i,{value:"Sin Gluten",children:"Sin Gluten"}),e(i,{value:"Vegetariana",children:"Vegetariana"}),e(i,{value:"Vegana",children:"Vegana"}),e(i,{value:"Baja en Carbohidratos",children:"Baja en Carbohidratos"}),e(i,{value:"Alta en Prote\xEDnas",children:"Alta en Prote\xEDnas"}),e(i,{value:"Sin Frutos Secos",children:"Sin Frutos Secos"}),e(i,{value:"Keto",children:"Keto"}),e(i,{value:"Ninguna",children:"Ninguna"})]})]})}),e(n,{item:!0,xs:12,sm:6,children:e(l,{label:"Fecha de cumplea\xF1os",type:"date",fullWidth:!0,variant:"outlined",value:t.birthDate,onChange:a=>s({...t,birthDate:a.target.value})})}),e(n,{item:!0,xs:12,sm:6,children:e(l,{label:"Contrase\xF1a actual",type:"password",fullWidth:!0,variant:"outlined",value:t.passwordCurrent,onChange:a=>s({...t,passwordCurrent:a.target.value})})}),e(n,{item:!0,xs:12,sm:6,children:e(l,{label:"Nueva Contrase\xF1a",type:"password",fullWidth:!0,variant:"outlined",value:t.password,onChange:a=>s({...t,password:a.target.value})})}),e(n,{item:!0,xs:12,sm:6,children:e(l,{label:"Confirmar Nueva Contrase\xF1a",type:"password",fullWidth:!0,variant:"outlined",value:t.confirmarContrasena,onChange:a=>s({...t,confirmarContrasena:a.target.value})})})]}),e(C,{sx:{display:"flex",justifyContent:"center",marginTop:3},children:e(E,{variant:"contained",sx:{backgroundColor:"red","&:hover":{backgroundColor:"darkred"},padding:"10px 45px",fontSize:"0.975rem"},onClick:w,disabled:v,children:v?"Guardando...":"Guardar Cambios"})})]})]})})})};export{q as default};
//# sourceMappingURL=ActualizarDatos.39075ef9.js.map
